---
title: Environment & secrets
description: Key config values for inbox routing and API ingestion.
---

## API (`apps/api`)

- `PORT` — API port (defaults to `3003`).
- `ALLOWED_API_ORIGINS` — comma-separated CORS allowlist.
- `NEXT_PUBLIC_SUPABASE_URL` — Supabase project URL.
- `SUPABASE_SERVICE_KEY` — Supabase service role key (server-only).
- `SUPABASE_JWT_SECRET` — Supabase JWT signing secret (used to verify access tokens for RLS).
- `DATABASE_PRIMARY_URL` — primary Postgres connection string.
- `DATABASE_LHR_URL` — read-replica connection string (use primary in dev).
- `DATABASE_SESSION_POOLER` — session pooler connection string (use primary in dev).
- `FLY_REGION` — optional region hint for replica routing (Fly.io).
- `UPSTASH_REDIS_REST_URL` — Upstash Redis REST URL (cache for RLS + replication).
- `UPSTASH_REDIS_REST_TOKEN` — Upstash Redis REST token.
- `KV_DISABLED` — set to `true` to disable Redis cache (falls back to in-memory).
- `INBOX_ROOT_DOMAIN` — shared inbound domain (for example `in.plop.email`).
- `INBOX_WEBHOOK_SECRET` — bearer token expected by `/webhooks/inbox`.

## App (`apps/app`)

- `NEXT_PUBLIC_API_URL` — base URL for the API (`/trpc` + REST).
- `NEXT_PUBLIC_SUPABASE_URL` — Supabase project URL.
- `NEXT_PUBLIC_SUPABASE_ANON_KEY` — Supabase anon key (client-safe).
- `SUPABASE_SERVICE_KEY` — Supabase service role key (server-only).
- `RESEND_API_KEY` — Resend API key for outbound email.
- `UPSTASH_REDIS_REST_URL` — Upstash Redis REST URL.
- `UPSTASH_REDIS_REST_TOKEN` — Upstash Redis REST token.
- `NEXT_PUBLIC_OPENPANEL_CLIENT_ID` — OpenPanel public client id.
- `OPENPANEL_SECRET_KEY` — OpenPanel server secret.
- `NEXT_PUBLIC_SENTRY_DSN` — Sentry DSN (client + server).
- `PORT` — Next.js dev port (defaults to `3000`).
- `VERCEL_URL` — Vercel deployment URL (used for absolute links).

## Web (`apps/web`)

- `NEXT_PUBLIC_SITE_URL` — canonical marketing site URL.
- `NEXT_PUBLIC_LOOPS_FORM_ID` — Loops newsletter form id.
- `NEXT_PUBLIC_OPENPANEL_CLIENT_ID` — OpenPanel public client id.
- `OPENPANEL_SECRET_KEY` — OpenPanel server secret.
- `NEXT_PUBLIC_CAL_LINK` — Cal.com scheduling link.

## Docs (`apps/docs`)

- `NEXT_PUBLIC_SITE_URL` — base URL for metadata + OG images.

## Inbox worker (`apps/inbox`)

Wrangler vars:

- `EMAIL_DOMAIN` — inbound root domain (for example `in.plop.email`).
- `EMAIL_WORKER_NAME` — deployed worker name (used for routing rules).
- `CLOUDFLARE_ZONE_ID` — Cloudflare zone id for the apex domain.
- `WEBHOOK_URL` — API endpoint to post inbound email payloads.
- `WEBHOOK_TIMEOUT_MS` — optional timeout override.

Bindings:

- `INBOX_STORAGE` — R2 bucket binding for stored emails.

Secrets:

- `ADMIN_TOKEN` — admin API auth for the worker.
- `CLOUDFLARE_API_TOKEN` — Cloudflare token used to manage routing + DNS.
- `WEBHOOK_AUTH_TOKEN` — bearer token sent to the API (must match `INBOX_WEBHOOK_SECRET`).

<Callout type="info">
Keep `WEBHOOK_AUTH_TOKEN` and `INBOX_WEBHOOK_SECRET` identical, or webhooks will be rejected with 401.
</Callout>
